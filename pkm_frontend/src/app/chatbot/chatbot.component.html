<div class="chatbot-container">
  <div class="back-button-container">
    <button (click)="goBack()" class="back-button">‚Üê</button>
  </div>

  <div class="chatbot-messages" #chatMessages>
    @for (message of messages; track message) {
      <div class="chat-message">
        <div class="user-message">
          <strong>You:</strong> {{ message.user }}
        </div>
        <div class="ai-message">
          <strong>AI:</strong>
          <div [innerHTML]="message.ai | markdown"></div>
        </div>
      </div>
    }
  </div>

  <div class="chat-input">
    <input [(ngModel)]="currentMessage"
           (keyup.enter)="sendMessage()"
           [placeholder]="'Type your message...'"
           [disabled]="isLoading" />
    <button (click)="sendMessage()" [disabled]="isLoading">Send</button>

    <button class="model-selector-button" (click)="toggleModelSelector()">
      Select AI Model
    </button>
  </div>

  @if (isModelSelectorVisible) {
    <div class="model-selector">
      <label for="model">Select AI Model:</label>
      <select [(ngModel)]="requestedModel" id="model">
        @for (model of availableModels; track model) {
          <option [value]="model">{{ model }}</option>
        }
      </select>
    </div>
  }
</div>
